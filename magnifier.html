<!DOCTYPE html>
<html>
	<head>
		<meta charset=utf-8 />
		<title>放大镜</title>
	</head>
	<body>
		<canvas id="myCanvas" width="1000" height="600"></canvas>

		<script>

			var can=document.getElementById('myCanvas');
			var ctx=can.getContext('2d');

			window.onload=function(){
				var img=new Image();
				img.src='images/blue.jpg';
				img.onload=function(){
					ctx.drawImage(img,0,0,1000,600);
				}

				//获取鼠标坐标
				function getMousePosition(canvas,X,Y)
				{
					var box=canvas.getBoundingClientRect();
					var cx=X-box.left;
					var cy=Y-box.top;
					return {x:cx,y:cy};
				}

				//画放大镜
				function magnifier(canvas,context,pointer,radius){
					var X=pointer.x;
					var Y=pointer.y;

					context.save();
					context.beginPath();
					context.arc(X,Y,radius,0,360*Math.PI/180,true);
					context.clip();
					context.drawImage(img,X+radius*2,Y+radius*2,radius,radius,X-radius,Y-radius,radius*2,radius*2);
					context.restore();
				}

				can.onmousemove=function(e){

					ctx.clearRect(0,0,can.width,can.height);
					ctx.drawImage(img,0,0,1000,600);

					var e=e?e:window.event;

					var pointer=getMousePosition(can,e.clientX,e.clientY);

					magnifier(can,ctx,pointer,80);
				}
			}

		</script>
	</body>
</html>